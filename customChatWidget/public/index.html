<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Chat</title>
</head>

<body>
    <div id="root"></div>
    <script type="text/javascript" src="backendEndpoints.js"></script>
    <script src="amazon-connect-chat-interface.js"></script>
    <script src="ACChat.js"></script>
    <script>
        var attachmentsFeatureEnabled = false; // Prerequisite: https://docs.aws.amazon.com/connect/latest/adminguide/enable-attachments.html

        AmazonCustomChatWidget.ChatInterface.init({
            containerId: 'root',
            initiationIcon: 'icon', // Set either 'icon' or 'button'
            region: region, // set in "backendEndpoints.js"
            name: "refer|inputFields|Name", // **** Mandatory**** For chat without form, please add a constant or a variable. Otherwise, if you have a chat form, then you can refer it to the input fields like "refer|inputFields|Name"
            username: "refer|inputFields|UserName", // **** Mandatory**** For chat without form, please add a constant or a variable. Otherwise, if you have a chat form, then you can refer it to the input fields like "refer|inputFields|UserName"
            apiGateway: apiGatewayEndpoint, // set it "backendEndpoints.js"
            contactFlowId: contactFlowId, // set in "backendEndpoints.js"
            instanceId: instanceId, // set in "backendEndpoints.js"
            attachments: attachmentsFeatureEnabled,
            contactAttr: {
                SomeContactAttributeKey: "SomeContactAttributeValue",
            },
            // Set optional chat duration: https://docs.aws.amazon.com/connect/latest/APIReference/API_StartChatContact.html#connect-StartChatContact-request-ChatDurationInMinutes
            chatDurationInMinutes: 1500, // min 60, max 10080 - default 1500 (25 hours)
            preChatForm: {
                visible: true,
                inputFields: [{
                    name: "Name",
                    validation: "required"
                }, {
                    name: "UserName",
                    validation: "required"
                }, {
                    name: "Email",
                    validation: "notrequired"
                }]
            },
            primaryColor: 'green',
            description: 'Welcome to Amazon Connect Chat'
        })
    </script>
</body>

</html>